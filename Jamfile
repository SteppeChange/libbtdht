import feature : feature ;

#feature clang-cxx11 : off on : composite propagated link-incompatible ;
#feature.compose <clang-cxx11>on : <cxxflags>-std=c++11
#	<cxxflags>-stdlib=libc++ <linkflags>-stdlib=libc++ ;

use-project /ut_utils : ut_utils ;
use-project /tommath : libtommath ;
use-project /tomcrypt : libtomcrypt ;

SOURCES = DHTMessage DhtImpl ExternalIPCounter blockallocator dht ;

lib ut_dht : src/$(SOURCES).cpp
	: <include>src
	  <library>/ut_utils//ut_utils/<link>static
	  <library>/tommath//tommath/<link>static/<clang-cxx11>off
	  <library>/tomcrypt//tomcrypt/<link>static/<clang-cxx11>off
	  <include>libtomcrypt/src/headers
	  <target-os>windows:<define>WIN32
	: <link>static
	: <include>src
	;

